<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
      *{
    margin: 0px;
    padding: 0px;
    box-sizing: border-box;
}
nav{
    position: fixed;
    top: 0px;
    width: 100%;
}
.breadcrumb{
    background-color: rgb(81,81,97);
    border-radius: 0px;
}
a,a:hover{
    color: #AEBD38;
}
table{
    margin-top: 60px;
    color: #68829E;
    margin: 100px 10px;
}
table thead{
    background-color: #68829E;
    color: white;
    cursor: pointer;
}
tbody{
    height: 300px;
    overflow-y: scroll;
    display: block;
}
thead, tbody tr{
    display: table;
    table-layout: fixed;
    width: 100%;
}

.footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 60px;
    line-height: 60px;
    background-color: rgb(81,81,97);
}
/* these are not in sass files since they were added later into the project */
#up, #down{
    position: absolute;
}
#up{
    visibility: hidden;
}
#down{
    visibility: hidden;
}
#tip{
    position: absolute;
    top: 100px;
    border: 3px #68829E solid;
    border-radius: 8px;
    padding: 3px;
    left: 3px;
    visibility: hidden;
    transition: all 0.4s;
}
#tip p{
    color: #B5BE4E;
    font-size: small;
}
#site{
    transition: all 0.2s;
}
#site:hover{
    text-decoration: none;
    font-weight: 900;
}
    </style>

    <title>File Explorer App</title>
  </head>
  <body>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        crumbs
      </ol>
    </nav>
    
    <div class="container table-responsive">
      <table class="table table-striped table-borderless table-hover">
        <thead>
          <tr>
            <th id="item_name">
              Name
              <ion-icon name="caret-up-circle-outline" id="up"></ion-icon>
              <ion-icon name="caret-down-circle-outline" id="down"></ion-icon>
            </th>
            <th id="item_size">
              Size
            </th>
            <th id="item_date">
              Last modified
            </th>
          </tr>
        </thead>
        <tbody>
          maincontent
        </tbody>
      </table>
    </div>
    <div>
      <div id="tip">
        <p>names can be<br> sorted in <br>ascending and<br> descending order by<br> clicking on the<br> <strong>name button</strong></p>
      </div>
      <footer class="footer">
        <div class="container">
          <p class="text-muted">Developed by <a id="site" href="http://alireza-gh.com">alireza ghasemabady.</a></p>
        </div>
      </footer>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/ionicons@5.5.1/dist/ionicons.js"></script>
    <!-- ion icons -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script>
      //main table rows
const names = document.querySelectorAll('#name');
const sizes = document.querySelectorAll('#size');
const modified = document.querySelectorAll('#modified');
const tip = document.querySelector('#tip');
//the name, size, modified date buttons
const name_button = document.querySelector('#item_name');
const size_button = document.querySelector('#item_size');
const date_button = document.querySelector('#item_date');
//up and down arrows indicating asc or desc
const up = document.querySelector('#up');
const down = document.querySelector('#down');
//arrays and objects for storing current or the sorted versions of name, size and modified date
let row_storage = {};
let size_array = [];
let modified_storage = [];
let ordered_names = [];
let ordered_sizeandtime_arrays = [];
//variable for displaying asc or desc format
let phases = 0;
//for indexing the arrays
let i = 0;

sizes.forEach(size=>{
    size_array.push(size.innerText);
});

modified.forEach(mod =>{
    modified_storage.push(mod.innerText);
});

name_button.onclick = () => {
    if(phases === 0)
    {
        //storing table data in the row storage obj
        names.forEach(name => {
            row_storage[name.innerText.toLowerCase()] = [size_array[i], modified_storage[i]];
            i++;
        });
        
        //sorting the row storage obj in asc order
        const ordered_storage = Object.keys(row_storage).sort().reduce(
            (obj, key) => { 
              obj[key] = row_storage[key]; 
              return obj;
            }, 
            {}
          );

        i = 0;
        
        //transfering data from row storage obj to name, size, modified date arrays
        for(key in ordered_storage) ordered_names[i++] = key;
        i = 0;
        for(key2 in ordered_storage) ordered_sizeandtime_arrays[i++] = ordered_storage[key2];
        i = 0;
        
        //displaying data from arrays
        names.forEach(name => {
            name.innerText = ordered_names[i++];
        });
        i = 0;
        sizes.forEach(size => {
            size.innerText = ordered_sizeandtime_arrays[i++][0];
        });
        i = 0;
        modified.forEach(mod => {
            mod.innerText = ordered_sizeandtime_arrays[i++][1];
        });

        //making the up icon visible
        up.style.visibility = 'visible';
    }
    else if (phases === 1){
        //reversing all the arrays from previous phase than displaying them
        i = 0;
        ordered_names = ordered_names.reverse();
        names.forEach(name => {
            name.innerText = ordered_names[i++];
        });

        ordered_sizeandtime_arrays = ordered_sizeandtime_arrays.reverse();
        i = 0;
        sizes.forEach(size => {
            size.innerText = ordered_sizeandtime_arrays[i++][0];
        });
        i = 0;
        modified.forEach(mod => {
            mod.innerText = ordered_sizeandtime_arrays[i++][1];
        });


        up.style.visibility = 'hidden';
        down.style.visibility = 'visible';
    }
    else if (phases === 2){
        //reload the page to display the data in it's original placement
        location.reload();
    }
    phases++;
};
name_button.onmouseover = () => {
    tip.style.visibility = 'visible';
};

    </script>
  </body>
</html>